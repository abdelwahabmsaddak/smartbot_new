<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</title>
    <link rel="stylesheet" href="/static/style.css">

    <!-- TradingView -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

    <style>
        body { background:#0d0d0d; color:white; font-family: 'Cairo'; }
        .box {
            background:#111; padding:20px; margin:20px auto;
            border-radius:12px; width:90%; max-width:900px;
        }
        button{
            background:#4CAF50; color:white; padding:10px 20px;
            border:none; border-radius:8px; cursor:pointer; margin-top:10px;
        }
    </style>
</head>

<body>

<h2 style="text-align:center;">ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù„Ù„Ø¹Ù…Ù„Ø§Øª</h2>

<div class="box">
    <h3>ğŸ” Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø©</h3>
    <select id="symbol">
        <option value="BTCUSDT">Bitcoin (BTC)</option>
        <option value="ETHUSDT">Ethereum (ETH)</option>
        <option value="BNBUSDT">BNB</option>
        <option value="SOLUSDT">Solana</option>
        <option value="DOGEUSDT">Dogecoin</option>
    </select>
    <button onclick="generateAnalysis()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù„ÙŠÙ„</button>
</div>

<div class="box">
    <h3>ğŸ“ˆ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ</h3>
    <div id="chart" style="height:400px;"></div>
</div>

<div class="box">
    <h3>ğŸ¤– Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ (AI)</h3>
    <div id="ai_result">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬â€¦</div>
</div>

<script>
function loadChart(symbol){
    new TradingView.widget({
        "width": "100%",
        "height": 400,
        "symbol": "BINANCE:" + symbol,
        "interval": "60",
        "timezone": "Etc/UTC",
        "theme": "dark",
        "style": "1",
        "container_id": "chart"
    });
}

function generateAnalysis(){
    let symbol = document.getElementById("symbol").value;

    loadChart(symbol);

    fetch("/analysis/run", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({symbol:symbol})
    })
    .then(res => res.json())
    .then(data => {
        document.getElementById("ai_result").innerHTML = data.ai;
    });
}
</script>

</body>
</html>
