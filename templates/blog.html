{% extends "base.html" %}
{% block content %}

<h2 class="title">๐ ุงููุฏููุฉ</h2>

<div class="new-post">
    <h3>โ๏ธ ูุชุงุจุฉ ุชุฏูููุฉ ุฌุฏูุฏุฉ</h3>

    <form method="POST" action="/blog/new">
        <input type="text" name="title" placeholder="ุนููุงู ุงูุชุฏูููุฉ" required class="input">
        <textarea name="content" placeholder="ุงููุญุชูู" class="textarea"></textarea>
        <button class="btn">ูุดุฑ ุงูุชุฏูููุฉ</button>
    </form>

    <h4>๐ค ุชูููุฏ ุชุฏูููุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</h4>
    <input type="text" id="topic" placeholder="ุฃุฏุฎู ููุถูุน ุงูููุงู" class="input">
    <button onclick="generateAI()" class="btn-secondary">ุชูููุฏ ุชููุงุฆู</button>

    <textarea id="ai_result" class="textarea" placeholder="ุงููุต ุงููุงุชุฌ"></textarea>
</div>

<hr>

<h3>๐ ุขุฎุฑ ุงูุชุฏูููุงุช</h3>
{% for p in posts %}
<div class="post">
    <h3>{{ p[1] }}</h3>
    <p>{{ p[2] }}</p>
    <small>๐ {{ p[3] }}</small>
</div>
<hr>
{% endfor %}

<script>
function generateAI() {
    let topic = document.getElementById("topic").value;
    fetch("/blog/ai_generate", {
        method: "POST",
        headers: {"Content-Type": "application/x-www-form-urlencoded"},
        body: "topic=" + topic
    })
    .then(res => res.text())
    .then(txt => document.getElementById("ai_result").value = txt);
}
</script>

{% endblock %}
