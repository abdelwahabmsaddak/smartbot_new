<script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=USD"></script>

<div id="paypal-button-container"></div>

{% extends "base.html" %}

{% block content %}
<h2>ðŸ”¥ Dashboard</h2>

<p>Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ {{ user.username }} ðŸ‘‹</p>
{% endblock %}

<script>
paypal.Buttons({
    createOrder: function() {
        return fetch("/payments/create-order", {
            method: "POST"
        })
        .then(res => res.json())
        .then(data => data.id);
    },
    onApprove: function(data) {
        return fetch(`/payments/capture/${data.orderID}`, {
            method: "POST"
        })
        .then(res => res.json())
        .then(details => {
            alert("Payment Success!");
            window.location.href = "/dashboard";
        });
    }
}).render('#paypal-button-container');
</script>
