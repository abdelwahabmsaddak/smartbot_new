<!-- templates/whales.html -->
{% extends "base.html" %}
{% block content %}

<h2>๐ ุชุชุจูุน ุงูุญูุชุงู (Whale Tracking)</h2>

<div class="whale-box">
    <button onclick="loadWhales()">ุชุญููู ุงูุชุญูููุงุช ๐</button>
    <div id="whale_result"></div>
</div>

<hr>

<h3>๐ค ุชุญููู ุฐูู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</h3>

<div>
    <button onclick="analyzeWhalesAI()">ุชุญููู ุงูุชุญุฑูุงุช ๐</button>
    <pre id="ai_analysis"></pre>
</div>

<script>
function loadWhales() {
    fetch("/api/whales")
        .then(res => res.json())
        .then(data => {
            let html = "";
            data.forEach(w => {
                html += `
                    <div class="whale-item">
                        <p>๐ฐ ุงููููุฉ: ${w.amount}</p>
                        <p>๐ ูู: ${w.from}</p>
                        <p>โก๏ธ ุฅูู: ${w.to}</p>
                        <small>โณ ุงูููุช: ${w.time}</small>
                    </div><hr>
                `;
            });
            document.getElementById("whale_result").innerHTML = html;
        });
}

function analyzeWhalesAI() {
    fetch("/api/whales/ai_analyze")
        .then(res => res.text())
        .then(txt => {
            document.getElementById("ai_analysis").innerText = txt;
        });
}
</script>

{% endblock %}
